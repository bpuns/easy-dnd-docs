import{_ as i}from"./image-20221002140927928-5655fe59.js";import{_ as u,r as o,o as r,c as d,a,w as p,b as n,d as t,e as s}from"./app-168742e2.js";const k="/easy-dnd-docs/assets/drag-1cab0426.gif",v="/easy-dnd-docs/assets/image-20231003234220004-ad5d50ac.png",b="/easy-dnd-docs/assets/image-20231003234237285-16a2d12f.png",m={},g=s(`<h1 id="进阶" tabindex="-1"><a class="header-anchor" href="#进阶" aria-hidden="true">#</a> 进阶</h1><h2 id="上下文高阶配置" tabindex="-1"><a class="header-anchor" href="#上下文高阶配置" aria-hidden="true">#</a> 上下文高阶配置</h2><h3 id="拖拽模式" tabindex="-1"><a class="header-anchor" href="#拖拽模式" aria-hidden="true">#</a> 拖拽模式</h3><p>在创建拖拽上下文的时候，可以指定拖拽模式，默认值是 <code>DND_MODE.SWARAJ</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">enum</span> <span class="token constant">DND_MODE</span> <span class="token punctuation">{</span>
  <span class="token constant">SCOPE</span> <span class="token operator">=</span> <span class="token string">&#39;scope&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">SWARAJ</span> <span class="token operator">=</span> <span class="token string">&#39;swaraj&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ProviderConfig</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** 拖拽类型，有 SCOPE 和 SWARAJ 两种可选 */</span>
    dndMode<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">DND_MODE</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 拖拽延时时间，必须大于等于0 */</span>
    delay<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * 创建拖拽作用域下的基本数据
 * <span class="token keyword">@param</span> <span class="token punctuation">{</span>ProviderConfig<span class="token punctuation">}</span> param
 * <span class="token keyword">@returns</span>
 */</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createProvider</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Rubbish<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>params<span class="token operator">?</span><span class="token operator">:</span> ProviderConfig<span class="token punctuation">)</span><span class="token operator">:</span> IDnDProvider<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Rubbish<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>DND_MODE.SWARAJ</code>的效果，可以看下面多层级嵌套的例子</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag-box<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px double<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">&gt;</span></span>
  dragItem
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> 
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drop1-box<span class="token punctuation">&quot;</span></span> 
  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>
<span class="token punctuation">&gt;</span></span>
  drop1

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> 
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drop2-box<span class="token punctuation">&quot;</span></span> 
    <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>120px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>
  <span class="token punctuation">&gt;</span></span>
    drop2
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drop3-box<span class="token punctuation">&quot;</span></span> 
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>40px</span><span class="token punctuation">&quot;</span></span></span>
    <span class="token punctuation">&gt;</span></span>
      drop3
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

  <span class="token keyword">import</span> <span class="token punctuation">{</span>
    createProvider<span class="token punctuation">,</span>
    DragCore<span class="token punctuation">,</span>
    DropCore
  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

  <span class="token comment">// 创建拖拽上下文</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 创建一个拖拽类型</span>
  <span class="token keyword">const</span> <span class="token constant">DRAG_TYPE</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span>

  <span class="token keyword">function</span> <span class="token function">createDrop</span><span class="token punctuation">(</span><span class="token parameter">domClassName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建放置实例</span>
    <span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">,</span>
        <span class="token literal-property property">acceptType</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">dragEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domClassName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">：dragEnter</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">dragLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domClassName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">：dragLeave</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domClassName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">：drop</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>domClassName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
      context
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">createDrop</span><span class="token punctuation">(</span><span class="token string">&#39;drop1-box&#39;</span><span class="token punctuation">)</span>
  <span class="token function">createDrop</span><span class="token punctuation">(</span><span class="token string">&#39;drop2-box&#39;</span><span class="token punctuation">)</span>
  <span class="token function">createDrop</span><span class="token punctuation">(</span><span class="token string">&#39;drop3-box&#39;</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),h=n("img",{src:i,alt:"image-20221002140927928",style:{zoom:"50%"}},null,-1),y=s(`<p>执行<code>1</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop1-box
</code></pre></div><p>执行<code>2</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop2-box
dragleave drop1-box
</code></pre></div><p>执行<code>3</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop3-box
dragleave drop2-box
</code></pre></div><p>执行<code>4</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop2-box
dragleave drop3-box
</code></pre></div><p>执行<code>5</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop1-box
dragleave drop2-box
</code></pre></div><p>执行<code>6</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragleave drop1-box
</code></pre></div><h3 id="dnd-mode-scope" tabindex="-1"><a class="header-anchor" href="#dnd-mode-scope" aria-hidden="true">#</a> DND_MODE.SCOPE</h3><p>如果在创建上下文的时候，把默认修改为 <code>DND_MODE.SCOPE</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  createProvider<span class="token punctuation">,</span>
  DragCore<span class="token punctuation">,</span>
  DropCore<span class="token punctuation">,</span>
  <span class="token constant">DND_MODE</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

<span class="token comment">// 创建拖拽上下文</span>
<span class="token comment">// const context = createProvider()</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token constant">DND_MODE</span><span class="token punctuation">.</span><span class="token constant">SCOPE</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那么执行拖拽步骤的时候打印如下</p>`,16),f=n("img",{src:i,alt:"image-20221002140927928",style:{zoom:"50%"}},null,-1),x=s(`<p>执行<code>1</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop1-box
</code></pre></div><p>执行<code>2</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop2-box
</code></pre></div><p>执行<code>3</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragenter drop3-box
</code></pre></div><p>执行<code>4</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragleave drop3-box
</code></pre></div><p>执行<code>5</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragleave drop2-box
</code></pre></div><p>执行<code>6</code>操作的时候，控制台打印</p><div class="language-console" data-ext="console"><pre class="language-console"><code>dragleave drop1-box
</code></pre></div><p>但这种模式一般不常用</p><h3 id="delay" tabindex="-1"><a class="header-anchor" href="#delay" aria-hidden="true">#</a> delay</h3><p>创建上下文的时候，还有一个配置参数，叫做<code>delay</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ProviderConfig</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/** 拖拽类型，有 SCOPE 和 SWARAJ 两种可选 */</span>
    dndMode<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">DND_MODE</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/** 拖拽延时时间，必须大于等于0 */</span>
    delay<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * 创建拖拽作用域下的基本数据
 * <span class="token keyword">@param</span> <span class="token punctuation">{</span>ProviderConfig<span class="token punctuation">}</span> param
 * <span class="token keyword">@returns</span>
 */</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createProvider</span><span class="token generic class-name"><span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Rubbish<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>params<span class="token operator">?</span><span class="token operator">:</span> ProviderConfig<span class="token punctuation">)</span><span class="token operator">:</span> IDnDProvider<span class="token operator">&lt;</span>Data<span class="token punctuation">,</span> Rubbish<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它的目的是为了延迟dragEnter事件触发的时间，单位是<code>ms</code>，它出现的目的是为了解决多层级嵌套的时候，外层dragEnter立马触发，导致执行外层节点立马触发动画逻辑（比如translate偏移让位），内层节点跟着外层跑，导致<strong>内层节点不好触发</strong>dragEnter，体验感不佳（一般不需要配置，遇到此问题的时候，可以按需要设置100-200ms延迟执行dragEnter来解决这个问题）</p>`,17),D=n("img",{src:k,alt:"image-20221002140927928",style:{zoom:"70%"}},null,-1),w=s(`<h2 id="拖拽状态与classname" tabindex="-1"><a class="header-anchor" href="#拖拽状态与classname" aria-hidden="true">#</a> 拖拽状态与className</h2><p>一般要拖拽元素在触发某个事件的时候需要添加一些样式来表示当前状态，<code>easy-dnd</code>内置了这个操作</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.dnd-hover</span> <span class="token punctuation">{</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 5px 1px <span class="token function">rgb</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.dnd-dragging</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.dnd-canDrop</span> <span class="token punctuation">{</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 10px 2px <span class="token function">rgb</span><span class="token punctuation">(</span>224<span class="token punctuation">,</span> 207<span class="token punctuation">,</span> 16<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.dnd-dragEnter</span> <span class="token punctuation">{</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0px 0px 10px 2px <span class="token function">rgba</span><span class="token punctuation">(</span>181<span class="token punctuation">,</span> 206<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

......

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

  <span class="token keyword">import</span> <span class="token punctuation">{</span> createProvider<span class="token punctuation">,</span> DragCore<span class="token punctuation">,</span> DropCore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token constant">DRAG_TYPE</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span>

  <span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">,</span>
      <span class="token literal-property property">acceptType</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 允许放置的元素进入时添加的className</span>
        <span class="token literal-property property">dragEnter</span><span class="token operator">:</span> <span class="token string">&#39;dnd-dragEnter&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 允许放置的元素开始拖拽添加的className</span>
        <span class="token literal-property property">canDrop</span><span class="token operator">:</span> <span class="token string">&#39;dnd-canDrop&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drop1-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
      context<span class="token punctuation">,</span>
      <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 鼠标移入的时候添加的className</span>
        <span class="token literal-property property">hover</span><span class="token operator">:</span> <span class="token string">&#39;dnd-hover&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 该元素拖拽中添加的className</span>
        <span class="token literal-property property">dragging</span><span class="token operator">:</span> <span class="token string">&#39;dnd-dragging&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><div class="highlight-line"> </div><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),_=n("img",{src:v,style:{width:"320px"}},null,-1),q=n("img",{src:b,style:{width:"300px"}},null,-1),E=s(`<h2 id="candrop" tabindex="-1"><a class="header-anchor" href="#candrop" aria-hidden="true">#</a> canDrop</h2><p>在<code>easy-dnd</code>中，可以通过 <code>DragCore.config.type</code> 和 <code>DropCore.config.acceptType</code> 来控制能否放置，但是真实情况往往更复杂。比如当前元内部只能放置一次，因此DropCore还提供了一个canDrop方法来控制是否允许放置（ 会先过滤一遍<code>DropCore.config.acceptType</code> ，通过了才会走canDrop方法）</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>关闭放置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag-box<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px double<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  dragItem
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drop1-box<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  drop1
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

  <span class="token keyword">import</span> <span class="token punctuation">{</span> createProvider<span class="token punctuation">,</span> DragCore<span class="token punctuation">,</span> DropCore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">let</span> canDrop <span class="token operator">=</span> <span class="token boolean">true</span>

  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    canDrop <span class="token operator">=</span> <span class="token operator">!</span>canDrop
    e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>canDrop <span class="token operator">?</span> <span class="token string">&#39;关闭&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;开启&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">放置</span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token constant">DRAG_TYPE</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span>

  <span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">,</span>
      <span class="token literal-property property">acceptType</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 允许放置的元素进入时添加的className</span>
        <span class="token literal-property property">dragEnter</span><span class="token operator">:</span> <span class="token string">&#39;dnd-dragEnter&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 允许放置的元素开始拖拽时添加的className</span>
        <span class="token literal-property property">canDrop</span><span class="token operator">:</span> <span class="token string">&#39;dnd-canDrop&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">canDrop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 返回false表示不允许拖拽</span>
        <span class="token keyword">return</span> canDrop
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drop1-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
      context<span class="token punctuation">,</span>
      <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 鼠标移入时添加的className</span>
        <span class="token literal-property property">hover</span><span class="token operator">:</span> <span class="token string">&#39;dnd-hover&#39;</span><span class="token punctuation">,</span>
        <span class="token comment">// 该元素拖拽中添加的className</span>
        <span class="token literal-property property">dragging</span><span class="token operator">:</span> <span class="token string">&#39;dnd-dragging&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="monitor" tabindex="-1"><a class="header-anchor" href="#monitor" aria-hidden="true">#</a> monitor</h2><p>在js中，事件触发的时候会产生一个Event对象，同理，<code>easy-dnd</code>在事件回调的时候，也会生成一个<code>Event</code>对象，其中包含者拖拽中会使用到的所有数据与方法</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drag</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragEnd</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">dragEnter</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragOver</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drop</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dragmonitor" tabindex="-1"><a class="header-anchor" href="#dragmonitor" aria-hidden="true">#</a> DragMonitor</h3>`,7),C=n("code",null,"drag",-1),P=s(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span>
  	  monitor<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 使用createProvider创建的上下文</span>
      monitor<span class="token punctuation">.</span>event			  <span class="token comment">// Event</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dropmonitor" tabindex="-1"><a class="header-anchor" href="#dropmonitor" aria-hidden="true">#</a> DropMonitor</h3>`,2),S=n("code",null,"drop",-1),T=s(`<p>比如想要知道当前拖拽元素是否在放置元素的上 50% ，可以这么写</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span>
  <span class="token comment">// 进入时触发的函数</span>
  <span class="token function">dragOver</span><span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 拖动到前50%</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">isOverTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      drop<span class="token punctuation">.</span>dropDom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;example3-enter-top&#39;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 拖动到后50%</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      drop<span class="token punctuation">.</span>dropDom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;example3-enter-bottom&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 离开</span>
  <span class="token function">dragLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 拖动的控件离开此控件，还原样式</span>
    drop<span class="token punctuation">.</span>dropDom<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 松开</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isTop <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">isOverTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">放置到</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>isTop <span class="token operator">?</span> <span class="token string">&#39;上&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;下&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">面</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token comment">// 去除样式</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dragLeave <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dragLeave</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你的放置元素分为了上中下三份，可以这么判断</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 获取盒子模型尺寸对象</span>
<span class="token keyword">const</span> rect <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getDomRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">isOverTop</span><span class="token punctuation">(</span>rect<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 0 - 1/3 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">isOverRowCenter</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 1/3 - 2/3 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 2/3 - 1 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同理，除了 y 轴位置判断，dropMonitor 也提供了 x 轴位置判断方法</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// 获取盒子模型尺寸对象</span>
<span class="token keyword">const</span> rect <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getDomRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">isOverLeft</span><span class="token punctuation">(</span>rect<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 0 - 1/3 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">isOverColumnCenter</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 1/3 - 2/3 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;拖到了 2/3 - 1 位置&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="rubbish" tabindex="-1"><a class="header-anchor" href="#rubbish" aria-hidden="true">#</a> rubbish</h2><p>用于存放拖拽具体业务逻辑中的一些数据，相当于一个全局仓库，你想存放的任何东西都可以丢这里面，而不是在你的业务代码中专门创建一个全局变量存储它</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createProvider<span class="token punctuation">,</span> DragCore<span class="token punctuation">,</span> DropCore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个拖拽类型</span>
<span class="token keyword">const</span> <span class="token constant">DRAG_TYPE</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span>

<span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  config<span class="token operator">:</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">,</span>
    acceptType<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drop</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>monitor<span class="token punctuation">.</span><span class="token function">getRubbish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>saveData<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drop1-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  config<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
    context
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span>monitor<span class="token punctuation">)</span><span class="token punctuation">{</span>
	monitor<span class="token punctuation">.</span><span class="token function">getRubbish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>saveData <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="关闭拖拽" tabindex="-1"><a class="header-anchor" href="#关闭拖拽" aria-hidden="true">#</a> 关闭拖拽</h2><p>某些时候，开发者想要动态控制是否允许拖拽，那么可以这么做</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>允许拖拽<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag-box<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px double<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
  dragItem
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

  <span class="token keyword">import</span> <span class="token punctuation">{</span> createProvider<span class="token punctuation">,</span> DragCore<span class="token punctuation">,</span> DropCore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;easy-dnd&#39;</span>

  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token constant">DRAG_TYPE</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span>

  <span class="token keyword">const</span> drag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 默认是否允许拖拽</span>
      <span class="token literal-property property">defaultDraggable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
      context
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    drag<span class="token punctuation">.</span>draggable <span class="token operator">=</span> <span class="token operator">!</span>drag<span class="token punctuation">.</span>draggable
    e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>drag<span class="token punctuation">.</span>draggable <span class="token operator">?</span> <span class="token string">&#39;关闭&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;开启&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">拖拽</span><span class="token template-punctuation string">\`</span></span>
  <span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="同一个dom绑定了drag与drop" tabindex="-1"><a class="header-anchor" href="#同一个dom绑定了drag与drop" aria-hidden="true">#</a> 同一个dom绑定了drag与drop</h2><p>在原生事件中，如果同一个dom绑定了drag相关事件和drop相关事件，那么在拖拽过程中所有事件都会被触发，在<code>easy-dnd</code>中，如果同一个<code>dom</code>同时绑定了drag与drop，<strong>那么自己移动到自己以及子孙节点的这个行为将会被屏蔽</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> dragDropDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.drag-box&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">,</span>
    <span class="token literal-property property">acceptType</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 不会被调用</span>
  <span class="token function">dragEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragEnter&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 不会被调用</span>
  <span class="token function">dragLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragLeave&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 不会被调用</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;drop&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>dragDropDom<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
    context
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragStart&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragEnd&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>dragDropDom<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15),N={id:"拖拽全局监听方法",tabindex:"-1"},R=n("a",{class:"header-anchor",href:"#拖拽全局监听方法","aria-hidden":"true"},"#",-1),A=s(`<p>在某些场景下，开发者想要监听当前页面中所有的拖拽事件，借此来做一些二次操作，<code>easy-dnd</code>允许你这么做，并提供了一个名为<code>onListenDrag</code>的api</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 监听拖拽</span>
<span class="token keyword">let</span> dragListen <span class="token operator">=</span> <span class="token function">onListenDrag</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token punctuation">,</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(monitor.getContext)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragStart&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;drag&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragEnd&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragEnter&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragOver&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragLeave&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;drop&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有意思的是，开发者还可以决定此次拖拽事件是否需要监听，<code>onListenDrag</code>提供了一个filter方法，返回true表示接收此次的监听，反之同理（默认不传filter就是监听所有拖拽事件）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">onListenDrag</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token punctuation">,</span>
  <span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;当前拖拽上下文&#39;</span><span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">dragStart</span><span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;dragStart&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="卸载" tabindex="-1"><a class="header-anchor" href="#卸载" aria-hidden="true">#</a> 卸载</h2><p>创建好drag与drop事件后，如果不使用它了，可以卸载它，防止内存泄露</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">...</span><span class="token operator">...</span>

<span class="token keyword">const</span> drag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DragCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DRAG_TYPE</span><span class="token punctuation">,</span>
    context
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> drop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DropCore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">,</span>
    <span class="token literal-property property">acceptType</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">DRAG_TYPE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">registerDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 卸载</span>
drag<span class="token punctuation">.</span><span class="token function">unSubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
drop<span class="token punctuation">.</span><span class="token function">unSubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 可以复用实例，再次绑定别的dom元素</span>
<span class="token comment">// drag</span>
<span class="token comment">//   .registerDom(document.querySelector(&#39;.c&#39;))</span>
<span class="token comment">//   .subscribe()</span>

<span class="token comment">// drop</span>
<span class="token comment">//   .registerDom(document.querySelector(&#39;.d&#39;))</span>
<span class="token comment">//   .subscribe()</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7);function j(O,G){const e=o("center"),c=o("RouterLink"),l=o("Badge");return r(),d("div",null,[g,a(e,null,{default:p(()=>[h]),_:1}),y,a(e,null,{default:p(()=>[f]),_:1}),x,a(e,null,{default:p(()=>[D]),_:1}),w,a(e,null,{default:p(()=>[_,q]),_:1}),E,n("p",null,[C,t("相关事件回调的事件对象，具体的类型定义看这里 "),a(c,{to:"/api/#createdragmonitor"},{default:p(()=>[t(" 核心API > createDragMonitor ")]),_:1}),t(" ，可以从中获取到当前拖拽上下文和dom事件的event 对象")]),P,n("p",null,[S,t("相关事件回调的事件对象，具体的类型定义看这里 "),a(c,{to:"/api/#createdropmonitor"},{default:p(()=>[t(" 核心API > createDropMonitor ")]),_:1}),t(" ，接下来来介绍下这个事件对象上几个很好用的方法")]),T,n("h2",N,[R,t(" 拖拽全局监听方法 "),a(l,{text:"1.1.0+",vertical:"top"})]),A])}const M=u(m,[["render",j],["__file","extras.html.vue"]]);export{M as default};
